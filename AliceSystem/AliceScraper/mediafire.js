//â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•//
//           ðŸš€ Alice Assistent - Bot WhatsApp Canggih           //
//â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•//
//
//   ðŸ¤– Powered By XyrooRynzz
//   Â© XyrooRynzz 2022 - 2026
//
//   ðŸ“Œ Source & Official Contact:
//   âž¤ Telegram : t.me/XyrooRynzz
//   âž¤ Gmail    : xyroorynzz@gmail.com
//   âž¤ Github   : github.com/xyroorynzz
//
//   ðŸ“¢ Telegram Channels:
//   âž¤ Utama : t.me/xyrooinformations
//   âž¤ Testi : t.me/xyrootestimoni
//
//â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€//
// ðŸ“– PANDUAN MEMBACA FILE README.MD
//â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€//
//
//   ðŸ“‚ File readme.md berisi panduan lengkap:
//   â€¢ Cara menjalankan script Alice Assistent
//   â€¢ Aturan & informasi penting
//   â€¢ File yang boleh/tidak boleh diubah
//   â€¢ Kontak & promo resmi dari XyrooRynzz
//
//   ðŸ’¡ Cara membacanya:
//   1. Buka panel / file manager kalian
//   2. Masuk ke direktori utama script
//   3. Klik file "readme.md"
//   4. Pilih "View" atau "Edit" untuk melihat isi panduan
//
//   ðŸ§  Disarankan membaca readme.md terlebih dahulu
//   sebelum menjalankan atau mengedit script.
//
//â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€//
//
//   âš¡ Fast â€¢ Secure â€¢ Automated â€¢ Stylish âš¡
//
//â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•//
//
// ðŸ“ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” [ Â© XyrooRynzz ] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ðŸ“‰//
const cheerio = require("cheerio");
const {
    fetch
} = require("undici");
const {
    lookup
} = require("mime-types");
async function mediafire(url) {
    return new Promise(async (resolve, reject) => {
        const response = await fetch(url);
        const html = await response.text();
        const $ = cheerio.load(html);

        const type = $(".dl-btn-cont").find(".icon").attr("class").split("archive")[1].trim();
        const filename = $(".dl-btn-label").attr("title");
        const size = $('.download_link .input').text().trim().match(/\((.*?)\)/)[1];
        const ext = filename.split(".").pop();
        const mimetype =
            lookup(ext.toLowerCase()) || "application/" + ext.toLowerCase();
        const download = $(".input").attr("href");
        resolve({
            filename,
            type,
            size,
            ext,
            mimetype,
            download,
        });
    }).catch((e) =>
        reject({
            msg: "Gagal mengambil data dari link tersebut",
        }),
    );
}

module.exports = mediafire;